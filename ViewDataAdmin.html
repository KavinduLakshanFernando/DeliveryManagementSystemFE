<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Driver View</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .modal-dialog {
            max-width: 700px;
        }
        .driver-details-card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .detail-group {
            margin-bottom: 1.5rem;
        }
        .detail-label {
            font-weight: 600;
            color: #495057;
        }
        .detail-value {
            color: #212529;
        }
    </style>
</head>
<body>

<!-- Button to trigger modal (this would be in your driver list view) -->
<button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#driverViewModal"
        th:data-driver-id="${driver.id}">
    View
</button>

<!-- Driver View Modal -->
<div class="modal fade" id="driverViewModal" tabindex="-1" aria-labelledby="driverViewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="driverViewModalLabel">Driver Details</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="card driver-details-card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <h5 class="card-title mb-4" id="driverName"></h5>
                                    <div class="badge bg-success mb-3" id="driverStatus"></div>
                                </div>
                            </div>

                            <!-- Personal Information -->
                            <div class="detail-group">
                                <h6 class="text-primary">Personal Information</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <span class="detail-label">Email:</span>
                                            <span class="detail-value" id="driverEmail"></span>
                                        </div>
                                        <div class="mb-2">
                                            <span class="detail-label">Phone:</span>
                                            <span class="detail-value" id="driverPhone"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <span class="detail-label">Date of Birth:</span>
                                            <span class="detail-value" id="driverDob"></span>
                                        </div>
                                        <div class="mb-2">
                                            <span class="detail-label">Gender:</span>
                                            <span class="detail-value" id="driverGender"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Address Information -->
                            <div class="detail-group">
                                <h6 class="text-primary">Address</h6>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="mb-2">
                                            <span class="detail-label">Address:</span>
                                            <span class="detail-value" id="driverAddress"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- License Information -->
                            <div class="detail-group">
                                <h6 class="text-primary">License Information</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <span class="detail-label">License Number:</span>
                                            <span class="detail-value" id="driverLicenseNumber"></span>
                                        </div>
                                        <div class="mb-2">
                                            <span class="detail-label">License State:</span>
                                            <span class="detail-value" id="driverLicenseState"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <span class="detail-label">License Class:</span>
                                            <span class="detail-value" id="driverLicenseClass"></span>
                                        </div>
                                        <div class="mb-2">
                                            <span class="detail-label">Expiry Date:</span>
                                            <span class="detail-value" id="driverLicenseExpiry"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Vehicle Information -->
                            <div class="detail-group">
                                <h6 class="text-primary">Vehicle Information</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <span class="detail-label">Vehicle:</span>
                                            <span class="detail-value" id="driverVehicle"></span>
                                        </div>
                                        <div class="mb-2">
                                            <span class="detail-label">Year:</span>
                                            <span class="detail-value" id="driverVehicleYear"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <span class="detail-label">Color:</span>
                                            <span class="detail-value" id="driverVehicleColor"></span>
                                        </div>
                                        <div class="mb-2">
                                            <span class="detail-label">License Plate:</span>
                                            <span class="detail-value" id="driverLicensePlate"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <span class="detail-label">Insurance Expiry:</span>
                                            <span class="detail-value" id="driverInsuranceExpiry"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Additional Information -->
                            <div class="detail-group">
                                <h6 class="text-primary">Additional Information</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <span class="detail-label">Experience:</span>
                                            <span class="detail-value" id="driverExperience"></span>
                                        </div>
                                        <div class="mb-2">
                                            <span class="detail-label">Availability:</span>
                                            <span class="detail-value" id="driverAvailability"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-2">
                                            <span class="detail-label">Preferred Area:</span>
                                            <span class="detail-value" id="driverPreferredArea"></span>
                                        </div>
                                        <div class="mb-2">
                                            <span class="detail-label">Registration Date:</span>
                                            <span class="detail-value" id="driverRegistrationDate"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<!--<script>-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        // Get all view buttons-->
<!--        const viewButtons = document.querySelectorAll('[data-bs-toggle="modal"][data-bs-target="#driverViewModal"]');-->

<!--        // Add click event listener to each button-->
<!--        viewButtons.forEach(button => {-->
<!--            button.addEventListener('click', function() {-->
<!--                const driverId = this.getAttribute('data-driver-id');-->
<!--                fetchDriverDetails(driverId);-->
<!--            });-->
<!--        });-->

<!--        // Function to fetch driver details-->
<!--        function fetchDriverDetails(driverId) {-->
<!--            fetch(`/api/drivers/${driverId}`)-->
<!--                .then(response => {-->
<!--                    if (!response.ok) {-->
<!--                        throw new Error('Network response was not ok');-->
<!--                    }-->
<!--                    return response.json();-->
<!--                })-->
<!--                .then(driver => {-->
<!--                    populateDriverModal(driver);-->
<!--                })-->
<!--                .catch(error => {-->
<!--                    console.error('Error fetching driver details:', error);-->
<!--                    alert('Failed to load driver details');-->
<!--                });-->
<!--        }-->

<!--        // Function to populate the modal with driver details-->
<!--        function populateDriverModal(driver) {-->
<!--            // Personal Information-->
<!--            document.getElementById('driverName').textContent = driver.firstName + ' ' + driver.lastName;-->
<!--            document.getElementById('driverEmail').textContent = driver.email;-->
<!--            document.getElementById('driverPhone').textContent = driver.phone;-->
<!--            document.getElementById('driverDob').textContent = formatDate(driver.dateOfBirth);-->
<!--            document.getElementById('driverGender').textContent = formatEnum(driver.gender);-->

<!--            // Status badge-->
<!--            const statusBadge = document.getElementById('driverStatus');-->
<!--            statusBadge.textContent = formatEnum(driver.status);-->
<!--            statusBadge.className = 'badge ';-->
<!--            switch(driver.status) {-->
<!--                case 'ACTIVE':-->
<!--                    statusBadge.className += 'bg-success';-->
<!--                    break;-->
<!--                case 'PENDING':-->
<!--                    statusBadge.className += 'bg-warning';-->
<!--                    break;-->
<!--                case 'SUSPENDED':-->
<!--                    statusBadge.className += 'bg-danger';-->
<!--                    break;-->
<!--                case 'INACTIVE':-->
<!--                    statusBadge.className += 'bg-secondary';-->
<!--                    break;-->
<!--                default:-->
<!--                    statusBadge.className += 'bg-info';-->
<!--            }-->

<!--            // Address-->
<!--            document.getElementById('driverAddress').textContent = driver.streetAddress + ', ' + driver.city;-->

<!--            // License Information-->
<!--            document.getElementById('driverLicenseNumber').textContent = driver.licenseNumber;-->
<!--            document.getElementById('driverLicenseState').textContent = driver.licenseState;-->
<!--            document.getElementById('driverLicenseClass').textContent = driver.licenseClass;-->
<!--            document.getElementById('driverLicenseExpiry').textContent = formatDate(driver.licenseExpiry);-->

<!--            // Vehicle Information-->
<!--            document.getElementById('driverVehicle').textContent = driver.vehicleMake + ' ' + driver.vehicleModel;-->
<!--            document.getElementById('driverVehicleYear').textContent = driver.vehicleYear;-->
<!--            document.getElementById('driverVehicleColor').textContent = driver.vehicleColor || 'N/A';-->
<!--            document.getElementById('driverLicensePlate').textContent = driver.licensePlate;-->
<!--            document.getElementById('driverInsuranceExpiry').textContent = formatDate(driver.insuranceExpiry);-->

<!--            // Additional Information-->
<!--            document.getElementById('driverExperience').textContent = driver.experience;-->
<!--            document.getElementById('driverAvailability').textContent = driver.availability;-->
<!--            document.getElementById('driverPreferredArea').textContent = driver.preferredArea || 'N/A';-->
<!--            document.getElementById('driverRegistrationDate').textContent = formatDate(driver.registrationDate);-->
<!--        }-->

<!--        // Helper function to format date-->
<!--        function formatDate(dateString) {-->
<!--            if (!dateString) return 'N/A';-->
<!--            const date = new Date(dateString);-->
<!--            return date.toLocaleDateString();-->
<!--        }-->

<!--        // Helper function to format enum values-->
<!--        function formatEnum(value) {-->
<!--            if (!value) return 'N/A';-->
<!--            return value.replace(/_/g, ' ').toLowerCase().replace(/\b\w/g, l => l.toUpperCase());-->
<!--        }-->
<!--    });-->
<!--</script>-->
</body>
</html>